$mobileMaxWidth=992;function getParameterByName(a,c){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=RegExp("[\\?&]"+a+"=([^&#]*)").exec(c);return null==e?"":decodeURIComponent(e[1].replace(/\+/g," "))}
(function(a){a.fn.datepicker.dates.de={days:"Sonntag Montag Dienstag Mittwoch Donnerstag Freitag Samstag Sonntag".split(" "),daysShort:"Son Mon Die Mit Don Fre Sam Son".split(" "),daysMin:"So Mo Di Mi Do Fr Sa So".split(" "),months:"Januar Februar M\u00e4rz April Mai Juni Juli August September Oktober November Dezember".split(" "),monthsShort:"Jan Feb M\u00e4r Apr Mai Jun Jul Aug Sep Okt Nov Dez".split(" "),today:"Heute",weekStart:1,format:"dd.mm.yyyy"}})(jQuery);
$(document).ready(function(){$("#SideCalendar").datepicker({format:"dd/mm/yyyy",weekStart:1,todayBtn:!0,language:"de",orientation:"top center",daysOfWeekDisabled:"0,6",calendarWeeks:!0,todayHighlight:!0,selectWeek:!0,autoclose:!0,todayBtn:"linked"},function(){});$(".pickDate").datepicker({format:"dd.mm.yyyy",weekStart:1,language:"de",todayHighlight:!0,autoclose:!0,orientation:"top center"},function(){});$("#SideCalendar").datepicker().on("changeDate",function(a){$("#calendar").length?(console.log("Datepicker: "+
a.date),$("#calendar").fullCalendar("gotoDate",new Date(a.date))):window.location.href="/captility/calendars/?date="+a.date})});
$(document).ready(function(){var a=$("<div/>").qtip({id:"calendar",prerender:!0,content:{text:" ",title:{button:!0}},position:{my:"top center",at:" center",target:"mouse",viewport:$("#calendar"),adjust:{mouse:!1,scroll:!1}},show:!1,hide:{event:"unfocus click mouseleave"},style:"qtip-bootstrap"}).qtip("api");$mediaQueryHeader={left:"title",center:"",right:"prev,today,next"};$mediaQueryView="agendaWeek";$hiddenDays=[0,6];if(-1<window.location.href.indexOf("calendar")||-1<window.location.href.indexOf("full_calendar"))$mediaQueryHeader.left=
"agendaDay,agendaWeek,month",$mediaQueryHeader.center="title",$mediaQueryHeader.right="prev,today,next",$mediaQueryView="month",$hiddenDays=[0];$(document).width()<$mobileMaxWidth&&($mediaQueryView="agendaDay");$(window).bind("resize",function(){$(document).width()<$mobileMaxWidth?$("#calendar").fullCalendar("changeView","agendaDay"):$("#calendar").fullCalendar("changeView","agendaWeek")});var c={url:"events/feed",type:"GET",cache:!1},e={url:"events/feedMy",type:"GET",cache:!1};$('a[data-toggle="tab"]').on("shown.bs.tab",
function(a){$("#calendar").fullCalendar("render");$("#calendar").fullCalendar("render")});$("#GeneralViewFc").click(function(){$(this).parent().hasClass("active")||$("#calendar").fullCalendar("removeEventSource",e).fullCalendar("removeEventSource",c).fullCalendar("addEventSource",c)});$("#MyWeekViewFc").click(function(){$(this).parent().hasClass("active")||$("#calendar").fullCalendar("removeEventSource",c).fullCalendar("removeEventSource",e).fullCalendar("addEventSource",e)});$("#calendar").fullCalendar({header:$mediaQueryHeader,
defaultView:$mediaQueryView,weekMode:"variable",allDaySlot:!1,weekends:!0,firstDay:1,hiddenDays:$hiddenDays,aspectRatio:1.375,firstHour:8,minTime:6,maxTime:22,axisFormat:"HH:mm",formatDate:"dd.MM.yyyy HH:mm:ss",titleFormat:{month:"MMMM yyyy",week:"dd.[ MMM.][yy]{ '&#8211;' dd. MMMM yyyy}",day:"dddd, dd.MM.yyyy"},columnFormat:{month:"ddd",week:"ddd - d.M.",day:"dddd d.M."},timeFormat:"HH:mm{ \u2013 HH:mm}' Uhr'",monthNames:"Januar Februar M\u00e4rz April Mai Juni Juli August September Oktober November Dezember".split(" "),
monthNamesShort:"Jan Feb Mrz Apr Mai Jun Jul Aug Sept Okt Nov Dez".split(" "),dayNames:"Sonntag Montag Dienstag Mittwoch Donnerstag Freitag Samstag".split(" "),dayNamesShort:"So Mo Di Mi Do Fr Sa".split(" "),allDayText:"Ganzt\u00e4gig",buttonText:{today:"Heute",month:"Monat",week:"Woche",day:"Tag"},eventSources:[c],editable:!0,selectable:!0,viewRender:function(a,b){console.log("FullCalendar: "+a.start);$("#SideCalendar").datepicker("update",new Date(a.start))},eventClick:function(f,b,c){a.set({"content.text":"<p><b>Start:</b> "+
f.start+"<br />"+(f.end&&"<p><b>End:</b> "+f.end+"</p>"||"")+'<a class="btn-m btn-sm btn-default pull-right" name="Bearbeiten" href="captures/edit/'+f.capture_id+'">Bearbeiten</a><a class="btn-m btn-sm btn-default pull-right" name="Anzeigen" href="captures/view/'+f.capture_id+'">Anzeigen</a>',"content.title":f.title,"style.classes":"qtip-bootstrap qtip-"+f.className}).reposition(b).show(b)},eventResizeStart:function(){a.hide()},eventDragStart:function(){a.hide()},viewDisplay:function(){a.hide()},
eventDrop:function(a){var b=new Date(a.start),c=b.getFullYear(),e=b.getDate(),g=b.getMonth()+1,h=b.getHours(),b=b.getMinutes(),d=new Date(a.end),k=d.getFullYear(),l=d.getDate(),m=d.getMonth()+1,n=d.getHours(),d=d.getMinutes();$.post("events/update?id="+a.id+"&start="+c+"-"+g+"-"+e+" "+h+":"+b+":00&end="+k+"-"+m+"-"+l+" "+n+":"+d+":00&allday="+(!0==a.allDay?1:0),function(a){})},eventResize:function(a){var b=new Date(a.start),c=b.getFullYear(),e=b.getDate(),g=b.getMonth()+1,h=b.getHours(),b=b.getMinutes(),
d=new Date(a.end),k=d.getFullYear(),l=d.getDate(),m=d.getMonth()+1,n=d.getHours(),d=d.getMinutes();$.post("events/update?id="+a.id+"&start="+c+"-"+g+"-"+e+" "+h+":"+b+":00&end="+k+"-"+m+"-"+l+" "+n+":"+d+":00",function(a){})}});if($("#calendar").length){var p=getParameterByName("date",window.location.href);p&&($("#calendar").fullCalendar("gotoDate",new Date(p)),console.log("Query: "+getParameterByName("date",window.location.href)))}});
var eventColorValues={colors:["#202020 #3a87ad #f70 #009406 #FFEB00 #FD3E20 #5F43A8 #009B9B #579B00 #FF38D7 #FDFDFD".split(" ")]},eventColorNames="Black Blue Orange Green Yellow Red Purple Indigo Mint Pink White".split(" ");
$(document).ready(function(){$(".colorpalette").colorPalette(eventColorValues).on("selectColor",function(a){$(".selected-color").val(a.color)});(function(a){a.fn.updateScheduleRemoveState=function(){var c=a("#ScheduleContainer button.form-schedule-remove");1<c.length?c.prop("disabled",!1):c.prop("disabled",!0);return!0}})(jQuery);$("#ScheduleContainer").on("click","a.form-toggle",function(){var a=$($(this).attr("href"));a.parent().find("input, select").prop("disabled",!0);a.find("input, select").prop("disabled",
!1)});$("#ScheduleContainer").on("click","button.form-schedule-add",function(){var a=$("#ScheduleContainer .panel").length;$("#ScheduleContainer").append('<div class="panel panel-default"><div class="panel-heading panel-link" data-toggle="collapse" href="#container'+a+'"><small class="glyphicon glyphicon-time"></small><strong>Aufnahmezeit einstellen</strong></div><div class="panel-body" id="container'+a+'"><ul class="nav nav-tabs nav-justified tabs-left"><li class="active"><a href="#single'+a+'" class="form-toggle" data-toggle="tab">Einzelaufzeichnung</a></li><li><a href="#regular'+
a+'" class="form-toggle" data-toggle="tab">Regelm\u00e4\u00dfige Aufzeichnung</a></li><li class="disabled"><a href="#except'+a+'" class="form-toggle" data-toggle="tab">Ausnahmeregel</a></li></ul>\x3c!-- Single Instance Schedule --\x3e<div class="tab-content"><div class="tab-pane active" id="single'+a+'">\x3c!--<div class="form-group"></div>--\x3e<div class="form-group"><label for="Schedule'+a+'IntervalStart" class="control-label">Datum der Aufzeichnung</label><div class="input-group input-thin"><span class="input-group-addon glyphicon glyphicon-calendar input-group-glyphicon"></span><div class="input string required"><input name="data[Schedule]['+
a+'][interval_start]" class="form-control pickDate" placeholder="Datum der Aufzeichnung" type="string" id="Schedule'+a+'IntervalStart"></div></div></div><div class="form-group"><div class="required"><label for="Schedule'+a+'DurationHour">Dauer der Aufzeichnung</label><div class="input time required"><select name="data[Schedule]['+a+'][duration][hour]" class="form-control form-control-date" id="Schedule'+a+'DurationHour" required="required"><option value="'+a+""+a+'">'+a+'</option><option value="'+
a+'1">1</option><option value="'+a+'2" selected="selected">2</option><option value="'+a+'3">3</option><option value="'+a+'4">4</option><option value="'+a+'5">5</option><option value="'+a+'6">6</option><option value="'+a+'7">7</option><option value="'+a+'8">8</option><option value="'+a+'9">9</option><option value="1'+a+'">1'+a+'</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="2'+
a+'">2'+a+'</option><option value="21">21</option><option value="22">22</option><option value="23">23</option></select>:<select name="data[Schedule]['+a+'][duration][min]" class="form-control form-control-date" id="Schedule'+a+'DurationMin" required="required"><option value="'+a+""+a+'" selected="selected">'+a+""+a+'</option><option value="15">15</option><option value="3'+a+'">3'+a+'</option><option value="45">45</option></select></div></div></div></div>\x3c!-- Regular Schedule --\x3e<div class="tab-pane" id="regular'+
a+'">\x3c!--<div class="form-group"></div><div class="form-group"></div>--\x3e<div class="form-group"><label for="Schedule'+a+'IntervalStart" class="control-label">Zeitraum der Aufzeichnung</label><div class="input-group input-thin"><span class="input-group-addon glyphicon glyphicon-calendar input-group-glyphicon"></span><div class="input string required"><input name="data[Schedule]['+a+'][interval_start]" class="form-control pickDate" placeholder="Beginn d. Zeitraums" disabled="disabled" type="string" id="Schedule'+
a+'IntervalStart"></div><span class="input-group-addon">bis</span><div class="input string required"><input name="data[Schedule]['+a+'][interval_end]" class="form-control pickDate" placeholder="Ende d. Zeitraums" disabled="disabled" type="string" id="Schedule'+a+'IntervalEnd"></div></div></div><div class="form-group"><div><label for="Schedule'+a+'RepeatDay">Wiederholen an Wochentag</label><div class="input select"><select name="data[Schedule]['+a+'][repeat_day]" class="form-control" placeholder="&quot;Freitag&quot; f\u00fcr jeden Freitag usw..." disabled="disabled" id="Schedule'+
a+'RepeatDay"><option value="Monday">Montag</option><option value="Tuesday">Dienstag</option><option value="Wednesday">Mittwoch</option><option value="Thursday">Donnerstag</option><option value="Friday">Freitag</option><option value="Saturday" selected="selected">Samstag</option><option value="Sunday">Sonntag</option></select></div></div></div><div class="form-group"><div class="required"><label for="Schedule'+a+'RepeatTimeHour">Veranstaltungsbeginn (Uhrzeit)</label><div class="input time required"><select name="data[Schedule]['+
a+'][repeat_time][hour]" class="form-control form-control-date" disabled="disabled" id="Schedule'+a+'RepeatTimeHour"><option value="'+a+""+a+'">'+a+'</option><option value="'+a+'1">1</option><option value="'+a+'2">2</option><option value="'+a+'3">3</option><option value="'+a+'4">4</option><option value="'+a+'5">5</option><option value="'+a+'6">6</option><option value="'+a+'7">7</option><option value="'+a+'8">8</option><option value="'+a+'9">9</option><option value="1'+a+'">1'+a+'</option><option value="11">11</option><option value="12" selected="selected">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="2'+
a+'">2'+a+'</option><option value="21">21</option><option value="22">22</option><option value="23">23</option></select>:<select name="data[Schedule]['+a+'][repeat_time][min]" class="form-control form-control-date" disabled="disabled" id="Schedule'+a+'RepeatTimeMin"><option value="'+a+""+a+'" selected="selected">'+a+""+a+'</option><option value="15">15</option><option value="3'+a+'">3'+a+'</option><option value="45">45</option></select></div></div></div><div class="form-group"><div class="required"><label for="Schedule'+
a+'DurationHour">Dauer (Stunden)</label><div class="input time required"><select name="data[Schedule]['+a+'][duration][hour]" class="form-control form-control-date" disabled="disabled" id="Schedule'+a+'DurationHour"><option value="'+a+""+a+'">'+a+'</option><option value="'+a+'1">1</option><option value="'+a+'2" selected="selected">2</option><option value="'+a+'3">3</option><option value="'+a+'4">4</option><option value="'+a+'5">5</option><option value="'+a+'6">6</option><option value="'+a+'7">7</option><option value="'+
a+'8">8</option><option value="'+a+'9">9</option><option value="1'+a+'">1'+a+'</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="2'+a+'">2'+a+'</option><option value="21">21</option><option value="22">22</option><option value="23">23</option></select>:<select name="data[Schedule]['+
a+'][duration][min]" class="form-control form-control-date" disabled="disabled" id="Schedule'+a+'DurationMin"><option value="'+a+""+a+'" selected="selected">'+a+""+a+'</option><option value="15">15</option><option value="3'+a+'">3'+a+'</option><option value="45">45</option></select></div></div></div><div class="form-group"><div><label for="Schedule'+a+'RepeatWeek">W\u00f6chentlich wiederholen</label><div class="input select"><select name="data[Schedule]['+a+'][repeat_week]" class="form-control" placeholder="1 = jede Woche wiederholen, 2= jede zweite usw." disabled="disabled" id="Schedule'+
a+'RepeatWeek"><option value="1" selected="selected">Jede Woche</option><option value="2">Jede zweite Woche</option><option value="3">Jede dritte Woche</option><option value="4">Jede vierte Woche</option></select></div></div></div></div>\x3c!-- Exception Schedule --\x3e<div class="tab-pane" id="except'+a+'"><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">?</button><strong>Achtung!</strong>Ausnahmeregeln werden in der aktuellen Version von Captility noch nicht unterst\u00fctzt.</div></div><hr/><button class="btn btn-default form-schedule-add pull-right" type="button"><span class="glyphicon glyphicon-plus"></span>Weiterer Zeitplan</button><button class="btn btn-default form-schedule-remove" type="button" onclick=""><span class="glyphicon glyphicon-remove"></span>Zeitplan entfernen</button></div></div></div>');
$(this).updateScheduleRemoveState();$(".pickDate").datepicker({format:"dd.mm.yyyy",weekStart:1,language:"de",todayHighlight:!0,autoclose:!0,orientation:"top center"})});$("#ScheduleContainer").on("click","button.form-schedule-remove",function(){1<$("#ScheduleContainer button.form-schedule-remove").length&&($(this).parents(".panel").first().remove(),$(this).updateScheduleRemoveState())})});
