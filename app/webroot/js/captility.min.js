$mobileMaxWidth=992;function getParameterByName(d,e){d=d.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var f=RegExp("[\\?&]"+d+"=([^&#]*)").exec(e);return null==f?"":decodeURIComponent(f[1].replace(/\+/g," "))}jQuery.fn.slideRight=function(d,e){$(this).css({width:"0"});var f,h;return this.each(function(c,a){a=jQuery(a);f=a.clone().css({width:"auto"}).appendTo(a.parent());h=f.css("width");f.remove();a.animate({width:h},d,e)})};$(".panel-collapse  a").click(function(d){d.stopPropagation()});
function cssprop(d,e){return parseInt(d.css(e),10)}
$.isFunction($.fn.datepicker)&&function(d){d.fn.datepicker.dates.de={days:"Sonntag Montag Dienstag Mittwoch Donnerstag Freitag Samstag Sonntag".split(" "),daysMin:"So Mo Di Mi Do Fr Sa So".split(" "),daysShort:"So Mo Di Mi Do Fr Sa So".split(" "),months:"Januar Februar M\u00e4rz April Mai Juni Juli August September Oktober November Dezember".split(" "),monthsShort:"Jan Feb M\u00e4r Apr Mai Jun Jul Aug Sep Okt Nov Dez".split(" "),today:"Heute",weekStart:1,format:"D, dd.mm.yyyy"}}(jQuery);
$.isFunction($.fn.datepicker)&&$.isFunction($.fn.fullCalendar)&&$(document).ready(function(){$("#SideCalendar").datepicker({format:"dd/mm/yyyy",weekStart:1,todayBtn:!0,language:"de",orientation:"top center",daysOfWeekDisabled:"0,6",calendarWeeks:!0,todayHighlight:!0,selectWeek:!0,autoclose:!0,todayBtn:!0},function(){});$(".pickDate").datepicker({weekStart:1,language:"de",todayHighlight:!0,autoclose:!0,orientation:"top center",todayBtn:"linked"},function(){});moment().format();$(".pickDateTime").each(function(){$(this).val(moment($(this).val(),
"DD.MM.YYYY hh:mm","de").format("dd, DD.MM.YYYY HH:mm [Uhr]","de"));moment($(this).val(),"dd, DD.MM.YYYY HH:mm [Uhr]",!0).isValid()||$(this).val(null);$(this).datetimepicker({language:"de",format:"dd, DD.MM.YYYY HH:mm [Uhr]",minuteStepping:15,useSeconds:!1})});$(".pickTime").each(function(){$(this).val(moment($(this).val(),"hh:mm","de").format("HH:mm [Uhr]","de"));moment($(this).val(),"HH:mm [Uhr]",!0).isValid()||$(this).val(null);$(this).datetimepicker({language:"de",format:"HH:mm [Uhr]",minuteStepping:15,
useSeconds:!1,pickDate:!1})});$(".pickStart").on("change.dp",function(d){$(".pickEnd").data("DateTimePicker").setStartDate(d.date)});$(".pickEnd").on("change.dp",function(d){$(".pickStart").data("DateTimePicker").setEndDate(d.date)});$("#SideCalendar").datepicker().on("changeDate",function(d){$("#calendar").length?$("#calendar").fullCalendar("gotoDate",new Date(d.date)):window.location.href=$appRoot+"/calendars/?date="+d.date})});
$(document).ready(function(){if($.isFunction($.fn.datepicker)&&$.isFunction($.fn.fullCalendar)){if($.isFunction($.fn.qtip))var d=$("<div/>").qtip({id:"calendar",prerender:!0,content:{text:" ",title:{button:!0}},position:{my:"top center",at:" center",target:"mouse",viewport:$("#calendar"),adjust:{mouse:!1,scroll:!1}},show:!1,hide:{event:"unfocus",effect:function(){$(this).animate({opacity:0},{duration:300})}},style:"qtip-bootstrap"}).qtip("api");$mediaQueryHeader={left:"title",center:"",right:"prev,today,next"};
$mediaQueryView="agendaWeek";$hiddenDays=[0,6];if(-1<window.location.href.indexOf("calendar")||-1<window.location.href.indexOf("full_calendar"))$mediaQueryHeader.left="agendaDay,agendaWeek,month",$mediaQueryHeader.center="title",$mediaQueryHeader.right="prev,today,next",$mediaQueryView="month",$hiddenDays=[0];$(document).width()<$mobileMaxWidth&&($mediaQueryView="agendaDay");$(window).bind("resize",function(){$(document).width()<$mobileMaxWidth?$("#calendar").fullCalendar("changeView","agendaDay"):
$("#calendar").fullCalendar("changeView","agendaWeek")});var e={url:$appRoot+"events/feed",type:"GET",cache:!1},f={url:$appRoot+"events/feedMy",type:"GET",cache:!1};$('a[data-toggle="tab"]').on("shown.bs.tab",function(c){$("#calendar").fullCalendar("render");$("#calendar").fullCalendar("render")});$("#GeneralViewFc").click(function(){$(this).parent().hasClass("active")||$("#calendar").fullCalendar("removeEventSource",f).fullCalendar("removeEventSource",e).fullCalendar("addEventSource",e)});$("#MyWeekViewFc").click(function(){$(this).parent().hasClass("active")||
$("#calendar").fullCalendar("removeEventSource",e).fullCalendar("removeEventSource",f).fullCalendar("addEventSource",f)});$("#calendar").fullCalendar({header:$mediaQueryHeader,defaultView:$mediaQueryView,weekMode:"variable",allDaySlot:!1,weekends:!0,firstDay:1,hiddenDays:$hiddenDays,aspectRatio:1.215,firstHour:7,minTime:6,maxTime:22,axisFormat:"HH:mm",formatDate:"dd.MM.yyyy HH:mm:ss",titleFormat:{month:"MMMM yyyy",week:"dd.[ MMM.][yy]{ '&#8211;' dd. MMMM yyyy}",day:"dddd, dd.MM.yyyy"},columnFormat:{month:"ddd",
week:"ddd - d.M.",day:"dddd d.M."},timeFormat:"HH:mm{ \u2013 HH:mm}' Uhr'",monthNames:"Januar Februar M\u00e4rz April Mai Juni Juli August September Oktober November Dezember".split(" "),monthNamesShort:"Jan Feb Mrz Apr Mai Jun Jul Aug Sept Okt Nov Dez".split(" "),dayNames:"Sonntag Montag Dienstag Mittwoch Donnerstag Freitag Samstag".split(" "),dayNamesShort:"So Mo Di Mi Do Fr Sa".split(" "),allDayText:"Ganzt\u00e4gig",buttonText:{today:"Heute",month:"Monat",week:"Woche",day:"Tag"},eventSources:[e],
editable:!1,selectable:!0,viewRender:function(c,a){$("#SideCalendar").datepicker("update",new Date(c.start))},eventClick:function(c,a,b){c.place="H12";b='<ul class="list-group"><li><span class="glyphicon glyphicon-calendar"></span>'+c.datec+' <li><span class="glyphicon glyphicon-time gl-ml"></span>'+c.time;null!=c.place&&(b+=(c.place&&'  <span class="glyphicon glyphicon-map-marker gl-ml"></span>'+c.place+"</li><br/>"||"")+(c.niceEnd&&"<p><b>End:</b> "+c.end+"</p>"||""));null!=c.Lecture.lecture_id&&
(b+='<li><span class="glyphicon glyphicon-th-list"></span><a href="lectures/view/'+c.Lecture.lecture_id+'">'+c.Lecture.number+" "+c.Lecture.name+"</a>"+(c.Lecture.link&&'<a href="'+c.Lecture.link+'"> <span class="glyphicon glyphicon-link gl-ms"></span></a>')+"</li><br/>");null!=c.Host.host_id&&(b+='<li><span class="glyphicon cp-icon-lecturer"></span><a href="hosts/view/'+c.Host.host_id+'">'+c.Host.name+"</a>"+(c.Host.email&&'<a href="mailto:'+c.Host.email+'"> <span class="glyphicon glyphicon-envelope gl-ms"></span></a>')+
(c.Host.contact_email&&'<a href="mailto:'+c.Host.contact_email+'"><span class="glyphicon glyphicon-envelope gl-ms"></span></a>')+"</li><br/>");null!=c.EventType.name&&(b+='<li><span class="glyphicon glyphicon-facetime-video"></span>'+c.EventType.name+"</li><br/>");null!=c.User.user_id&&(b+='<li><span class="glyphicon glyphicon-user"></span><a href="users/view/'+c.User.user_id+'">'+c.User.username+'</a><a href="mailto:'+c.User.email+'"> <span class="glyphicon glyphicon-envelope gl-ms"></span></a></li><br/>');
b+='<a class="btn-m btn-sm btn-default pull-right" name="Bearbeiten" href="'+$appRoot+"events/edit/"+c.id+'">Bearbeiten<a class="btn-m btn-sm btn-default pull-right" name="Anzeigen" href="'+$appRoot+"events/view/"+c.id+'">Anzeigen';d.set({"content.text":b,"content.title":'<span class="glyphicon glyphicon-film"></span>'+c.title,"style.classes":"qtip-bootstrap qtip-"+c.className}).reposition(a).show(a)},eventResizeStart:function(){d.hide()},eventDragStart:function(){d.hide()},viewDisplay:function(){d.hide()},
eventDrop:function(c){var a=new Date(c.start),b=a.getFullYear(),d=a.getDate(),m=a.getMonth()+1,e=a.getHours(),a=a.getMinutes(),g=new Date(c.end),f=g.getFullYear(),h=g.getDate(),k=g.getMonth()+1,l=g.getHours(),g=g.getMinutes();$.post($appRoot+"events/update?id="+c.id+"&start="+b+"-"+m+"-"+d+" "+e+":"+a+":00&end="+f+"-"+k+"-"+h+" "+l+":"+g+":00&allday="+(!0==c.allDay?1:0),function(a){})},eventResize:function(c){var a=new Date(c.start),b=a.getFullYear(),d=a.getDate(),e=a.getMonth()+1,f=a.getHours(),
a=a.getMinutes(),g=new Date(c.end),h=g.getFullYear(),n=g.getDate(),k=g.getMonth()+1,l=g.getHours(),g=g.getMinutes();$.post($appRoot+"events/update?id="+c.id+"&start="+b+"-"+e+"-"+d+" "+f+":"+a+":00&end="+h+"-"+k+"-"+n+" "+l+":"+g+":00",function(a){})}});if($("#calendar").length){var h=getParameterByName("date",window.location.href);h&&($("#calendar").fullCalendar("changeView","agendaDay"),$("#calendar").fullCalendar("gotoDate",new Date(h)))}}});
var eventColorValues={colors:["#202020 #3a87ad #f70 #009406 #FFEB00 #FD3E20 #5F43A8 #009B9B #579B00 #FF38D7 #FDFDFD".split(" ")]},eventColorNames="Black Blue Orange Green Yellow Red Purple Indigo Mint Pink White".split(" ");
$(document).ready(function(){function d(a,b,c){b.last().nextAll();c=cssprop(a.first().prev(),"margin-bottom");isNaN(c)&&(c=0);var d=cssprop(b.last().next(),"margin-top");isNaN(d)&&(d=0);var e=cssprop(a.first(),"margin-top"),g=cssprop(a.last(),"margin-bottom"),f=cssprop(b.first(),"margin-top"),h=cssprop(b.last(),"margin-bottom"),k=a.last().offset().top+a.last().outerHeight()-a.first().offset().top,l=b.last().offset().top+b.last().outerHeight()-b.first().offset().top;move1=l+Math.max(h,e)+Math.max(c,
f)-Math.max(c,e);move2=-k-Math.max(g,f)-Math.max(c,e)+Math.max(c,f);move3=move1+a.first().offset().top+k-b.first().offset().top-l+Math.max(g,d)-Math.max(h,d);a.css("position","relative");b.css("position","relative");a.animate({top:move1},{duration:800});b.animate({top:move2},{duration:800,complete:function(){a.insertAfter(b.last());a.removeAttr("style");b.removeAttr("style");a.updateTaskStep()}})}function e(){$.isFunction($.fn.sortable)&&$(".workflow-task-list").sortable({forcePlaceholderSize:!0,
items:":not(.sort-disabled)"}).bind("sortupdate",function(a,b){b.item.updateTaskStep()})}$(".colorpalette").colorPalette(eventColorValues).on("selectColor",function(a){$(".selected-color").val(a.color)});$.isFunction($.fn.selectpicker)&&($("select:not(.form-control-date)").addClass("show-tick").selectpicker({selectedTextFormat:"values",noneSelectedText:'<span class="glyphicon el-icon-error"></span>',noneResultsText:'<span class="glyphicon el-icon-remove-sign"></span>',dropupAuto:!1,liveSearch:!0}),
$("select.form-control-date").selectpicker({selectedTextFormat:"values",noneSelectedText:'<span class="glyphicon el-icon-error"></span>',noneResultsText:'<span class="glyphicon el-icon-remove-sign"></span>',dropupAuto:!1,width:"auto"}));$(document).keydown(function(a){if($(event.target).is("input, textarea, select"))return!0;if(37==a.keyCode||65==a.keyCode)return $(".fc-button-prev").click(),!0;if(39==a.keyCode||68==a.keyCode)return $(".fc-button-next").click(),!0;if(32==a.keyCode||83==a.keyCode||
87==a.keyCode)return $(".fc-button-today").click(),!0});(function(a){a.fn.updateScheduleRemoveState=function(){var b=a("#ScheduleContainer button.form-schedule-remove");1<b.length?b.prop("disabled",!1):b.prop("disabled",!0);return!0}})(jQuery);if($.isFunction($.fn.selectpicker))$("#ScheduleContainer").on("shown.bs.tab","a.form-toggle",function(a){a=$($(this).attr("href"));a.parent().find("input, select").prop("disabled",!0).selectpicker("refresh");a.find("input, select").prop("disabled",!1).selectpicker("refresh")});
$(function(){var a=window.location.hash;a&&$('ul.nav a[href="'+a+'"]').first().tab("show");$(".nav-tabs a").click(function(a){a=$("body").scrollTop();window.location.hash=this.hash;$("html,body").scrollTop(a)})});if($.isFunction($.fn.datepicker))$("#ScheduleContainer").on("click","button.form-schedule-add",function(){var a=$("#ScheduleContainer .panel").length;$("#ScheduleContainer").append('<div class="panel panel-default"> <div class="panel-heading panel-link" data-toggle="collapse" href="#container'+
a+'"> <small class="glyphicon glyphicon-time"></small> <strong>Aufnahmezeit einstellen</strong></div> <div class="panel-body" id="container'+a+'"> <ul class="nav nav-tabs nav-justified tabs-left"> <li class="active"><a href="#single'+a+'" class="form-toggle" data-toggle="tab">Einzelaufzeichnung</a> </li> <li><a href="#regular'+a+'" class="form-toggle" data-toggle="tab">Regelm\u00e4\u00dfige Aufzeichnung</a></li> <li class="disabled"><a href="#except'+a+'" class="form-toggle" data-toggle="tab">Ausnahmeregel</a> </li> </ul> \x3c!-- Single Instance Schedule --\x3e <div class="tab-content"> <div class="tab-pane active" id="single'+
a+'">\x3c!--<div class="form-group"></div>--\x3e <div class="form-group"><label for="Schedule'+a+'IntervalStart" class="control-label">Datum der Aufzeichnung</label> <div class="input-group input-thin"><span  class="input-group-addon glyphicon glyphicon-calendar input-group-glyphicon"></span> <div class="input string required"><input name="data[Schedule]['+a+'][interval_start]"    class="form-control pickDate"    placeholder="Datum der Aufzeichnung" type="string"    id="Schedule'+a+'IntervalStart"></div> </div> </div> <div class="form-group"> <div class="required"><label  for="Schedule'+
a+'RepeatTimeHour">Veranstaltungsbeginn(Uhrzeit)</label> <div class="input time required"><select name="data[Schedule]['+a+'][repeat_time][hour]"    class="form-control form-control-date"    id="Schedule'+a+'RepeatTimeHour">  <option value="00">00</option>  <option value="01">1</option>  <option value="03">3</option>  <option value="04">4</option>  <option value="05">5</option>  <option value="06">6</option>  <option value="07">7</option>  <option value="08">8</option>  <option value="09">9</option>  <option value="10">10</option>  <option value="11">11</option>  <option value="12" selected="selected">12</option>  <option value="13">13</option>  <option value="14">14</option>  <option value="15">15</option>  <option value="16">16</option>  <option value="17">17</option>  <option value="18">18</option>  <option value="19">19</option>  <option value="20">20</option>  <option value="21">21</option>  <option value="22">22</option>  <option value="23">23</option> </select>:<select name="data[Schedule]['+
a+'][repeat_time][min]"  class="form-control form-control-date" id="Schedule'+a+'RepeatTimeMin">  <option value="00" selected="selected">00</option>  <option value="15">15</option>  <option value="30">30</option>  <option value="45">45</option> </select></div> </div> </div> <div class="form-group"> <div class="required"><label for="Schedule'+a+'DurationHour">Dauer der Aufzeichnung</label> <div class="input time required"><select name="data[Schedule]['+a+'][duration][hour]"    class="form-control form-control-date"    id="Schedule'+
a+'DurationHour"    required="required">  <option value="00">'+a+'</option>  <option value="01">1</option>  <option value="02" selected="selected">2</option>  <option value="03">3</option>  <option value="04">4</option>  <option value="05">5</option>  <option value="06">6</option>  <option value="07">7</option>  <option value="08">8</option>  <option value="09">9</option>  <option value="10">10</option>  <option value="11">11</option>  <option value="12">12</option>  <option value="13">13</option>  <option value="14">14</option>  <option value="15">15</option>  <option value="16">16</option>  <option value="17">17</option>  <option value="18">18</option>  <option value="19">19</option>  <option value="20">20</option>  <option value="21">21</option>  <option value="22">22</option>  <option value="23">23</option> </select>:<select name="data[Schedule]['+
a+'][duration][min]"  class="form-control form-control-date" id="Schedule'+a+'DurationMin"  required="required">  <option value="00" selected="selected">00</option>  <option value="15">15</option>  <option value="30">30</option>  <option value="45">45</option> </select></div> </div> </div> </div> \x3c!-- Regular Schedule --\x3e <div class="tab-pane" id="regular'+a+'"> \x3c!--<div class="form-group"></div><div class="form-group"></div>--\x3e <div class="form-group"><label for="Schedule'+a+'IntervalStart" class="control-label">Zeitraum der Aufzeichnung</label> <div class="input-group input-thin"><span  class="input-group-addon glyphicon glyphicon-calendar input-group-glyphicon"></span> <div class="input string required"><input name="data[Schedule]['+
a+'][interval_start]"    class="form-control pickDate"    placeholder="Beginn d. Zeitraums" disabled="disabled"    type="string" id="Schedule'+a+'IntervalStart"> </div> <span class="input-group-addon">bis</span> <div class="input string required"><input name="data[Schedule]['+a+'][interval_end]"    class="form-control pickDate"    placeholder="Ende d. Zeitraums" disabled="disabled"    type="string" id="Schedule'+a+'IntervalEnd"> </div> </div> </div> <div class="form-group"> <div><label for="Schedule'+
a+'RepeatWeek">W\u00f6chentlich wiederholen</label> <div class="input select"><select name="data[Schedule]['+a+'][repeat_week]"   class="form-control"   placeholder="1 = jede Woche wiederholen, 2= jede zweite usw."   disabled="disabled" id="Schedule'+a+'RepeatWeek">  <option value="1" selected="selected">Jede Woche</option>  <option value="2">Jede zweite Woche</option>  <option value="3">Jede dritte Woche</option>  <option value="4">Jede vierte Woche</option> </select></div> </div> </div> <div class="form-group"> <div><label for="Schedule'+
a+'RepeatDay">Wiederholen an Wochentag</label> <div class="input select"><select name="data[Schedule]['+a+'][repeat_day]"   class="form-control"   placeholder="&quot;Freitag&quot; f\u00fcr jeden Freitag usw..."   disabled="disabled" id="Schedule'+a+'RepeatDay">  <option value="Monday">Montag</option>  <option value="Tuesday">Dienstag</option>  <option value="Wednesday">Mittwoch</option>  <option value="Thursday">Donnerstag</option>  <option value="Friday">Freitag</option>  <option value="Saturday" selected="selected">Samstag</option>  <option value="Sunday">Sonntag</option> </select></div> </div> </div> <div class="form-group"> <div class="required"><label  for="Schedule'+
a+'RepeatTimeHour">Veranstaltungsbeginn(Uhrzeit)</label> <div class="input time required"><select name="data[Schedule]['+a+'][repeat_time][hour]"    class="form-control form-control-date"    disabled="disabled"    id="Schedule'+a+'RepeatTimeHour">  <option value="00">0</option>  <option value="01">1</option>  <option value="02">2</option>  <option value="03">3</option>  <option value="04">4</option>  <option value="05">5</option>  <option value="06">6</option>  <option value="07">7</option>  <option value="08">8</option>  <option value="09">9</option>  <option value="10">10</option>  <option value="11">11</option>  <option value="12" selected="selected">12</option>  <option value="13">13</option>  <option value="14">14</option>  <option value="15">15</option>  <option value="16">16</option>  <option value="17">17</option>  <option value="18">18</option>  <option value="19">19</option>  <option value="20">20</option>  <option value="21">21</option>  <option value="22">22</option>  <option value="23">23</option> </select>:<select name="data[Schedule]['+
a+'][repeat_time][min]"  class="form-control form-control-date" disabled="disabled"  id="Schedule'+a+'RepeatTimeMin">  <option value="00" selected="selected">00</option>  <option value="15">15</option>  <option value="3'+a+'">3'+a+'</option>  <option value="45">45</option> </select></div> </div> </div> <div class="form-group"> <div class="required"><label for="Schedule'+a+'DurationHour">Dauer (Stunden)</label> <div class="input time required"><select name="data[Schedule]['+a+'][duration][hour]"    class="form-control form-control-date"    disabled="disabled"    id="Schedule'+
a+'DurationHour">  <option value="00">0</option>  <option value="01">1</option>  <option value="02" selected="selected">2</option>  <option value="03">3</option>  <option value="04">4</option>  <option value="05">5</option>  <option value="06">6</option>  <option value="07">7</option>  <option value="08">8</option>  <option value="09">9</option>  <option value="10">10</option>  <option value="11">11</option>  <option value="12">12</option>  <option value="13">13</option>  <option value="14">14</option>  <option value="15">15</option>  <option value="16">16</option>  <option value="17">17</option>  <option value="18">18</option>  <option value="19">19</option>  <option value="20">20</option>  <option value="21">21</option>  <option value="22">22</option>  <option value="23">23</option> </select>:<select name="data[Schedule]['+
a+'][duration][min]"  class="form-control form-control-date" disabled="disabled"  id="Schedule'+a+'DurationMin">  <option value="00" selected="selected">00</option>  <option value="15">15</option>  <option value="30">30</option>  <option value="45">45</option> </select></div> </div> </div> </div> \x3c!-- Exception Schedule --\x3e <div class="tab-pane" id="except'+a+'"> <div class="alert alert-warning alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true">?</button> <strong>Achtung!</strong>Ausnahmeregeln werden in der aktuellen Version von Captility noch nicht unterst\u00fctzt. </div> </div> <hr/> <button class="btn btn-default form-schedule-add pull-right" type="button"><span class="glyphicon glyphicon-plus"></span>Weiterer Zeitplan </button> <button class="btn btn-default form-schedule-remove" type="button" onclick=""><span class="glyphicon glyphicon-trash"></span>Zeitplan entfernen </button> </div> </div> </div>');
$(this).updateScheduleRemoveState();$(".pickDate").datepicker({weekStart:1,language:"de",todayHighlight:!0,autoclose:!0,orientation:"top center",todayBtn:"linked"})});$("#ScheduleContainer").on("click","button.form-schedule-remove",function(){1<$("#ScheduleContainer button.form-schedule-remove").length&&$(this).parents(".panel").first().slideUp(800,function(){$(this).remove();$(this).updateScheduleRemoveState()})});$.fn.pulse=function(a){a=$.extend({times:3,duration:"slow"},a);for(var b=0;b<a.times;b++)$(this).animate({opacity:0.65},
a.duration).animate({opacity:1},a.duration).delay(50);return $(this)};$(".alert, .message").css({opacity:0}).animate({opacity:1},600).delay(3500);$(this).queue(function(){$(".alert-success, .alert-info").animate({opacity:"0"},"slow").slideUp(1E3);$(this).dequeue()});$("#ScheduleContainer").on("click","button.form-schedule-add",function(){var a=$("#ScheduleContainer .panel-body").last();a.hide();$("html, body").animate({scrollTop:a.parent().offset().top},800,function(){a.slideDown(800)})});var f=$(".container-wrapper").first(),
h=$(".btn-scrollTop").first();f.on("click","button.btn-scrollTop",function(){$("html, body").animate({scrollTop:$("body").offset().top},600)});h.length&&h.offset().top<$(window).height()&&h.hide();$("img.landing-page-thumbnail").click(function(){$(".modal-body").empty();var a=$(this).parent("a").attr("title");a?($(".modal-title").html(a),$("#LandingPageModal").find(".modal-dialog").css({"max-width":652})):($(".modal-title").html("Captility unterst\u00fctzt alle Ger\u00e4te!"),$("#LandingPageModal").find(".modal-dialog").css({"max-width":this.naturalWidth+
52}));$($(this).parents("div").html()).appendTo(".modal-body");$("#LandingPageModal").modal({show:!0})});$.isFunction($.fn.unveil)&&$("img").unveil();$(".captility-breadcrumb li").each(function(a){$(this).css({"z-index":255-a})});$(".captility-breadcrumb li").last().hide().css({"margin-left":"-400px"}).show().animate({"margin-left":"0"},600);$.isFunction($.fn.qrcode)&&$("a.qr-code").qtip({id:"qr-code",prerender:!0,content:{text:'<div class="qr-code-container"></div>',title:'<a href="'+window.location.href+
'"><span class="glyphicon glyphicon-link"></span>'+window.location.href.substring(0,30)+"...</a>",button:"Close"},show:{event:"click"},style:"qtip-bootstrap",position:{my:"top right",at:" top right"},events:{show:function(a,b){var c=window.location.href;$(this).find(".qr-code-container").empty().qrcode({width:250,height:250,text:c})}},hide:{event:"unfocus",effect:function(){$(this).animate({opacity:0},{duration:300})}}});jQuery.fn.switchTaskToEditMode=function(){$(this).find(".task-view").hide();
$(this).find(".task-edit").show().find("input, textarea").each(function(){$(this).prop("disabled",!1)});return $(this)};jQuery.fn.switchTaskToViewMode=function(){$(this).find(".task-edit").slideUp().find("input, textarea").each(function(){});$(this).find(".task-view").fadeIn();return $(this)};jQuery.fn.enableEnterListener=function(){var a=this;$(this).find(".task-name-field :input").keydown(function(b){if(13==(b.keyCode||b.which))return $(a).find(".task-save").click(),!1})};$(".task").enableEnterListener();
jQuery.fn.countTasksFrom=function(a){return $(a).find("li:not(.task-template, .workflow-task-add)").length};jQuery.fn.updateTaskId=function(a){$(this).find("label, textarea, input").each(function(){for(var b=["name","for","id"],c=0;c<b.length;++c)if(void 0!==$(this).prop(b[c])){var d=$(this).prop(b[c]).replace("$placeholder$",a);$(this).prop(b[c],d)}});return $(this)};jQuery.fn.updateTaskStep=function(){$(".workflow-task-list li.task").each(function(a,b){$(this).find(".task-step-field").find("input").val(a)});
return $(this)};e();var c=["primary","warning","danger","info"];$(".workflow-task-list").on("click",".workflow-task-add",function(){var a=$(this).parent().find("li.task-template");if(0<a.length){var b=a.clone().removeClass("task-template").hide().addClass("task");b.find(".timeline-badge").addClass(c[b.countTasksFrom(a.parent())%4]);b.switchTaskToEditMode();b.updateTaskId(b.countTasksFrom(a.parent()));a.before(b);b.slideDown("800");e();b.updateTaskStep();b.enableEnterListener()}});$("ul.workflow-task-list").on("click",
".task-save",function(){var a=$(this).parents("li.task"),b=a.find("h4.task-name"),c=a.find(".task-description"),d=a.find(".task-name-field").find("input"),e=a.find(".task-description-field").find("textarea");""===d.val()?d.closest(".form-group").addClass("has-error"):(b.find("hr").before(d.val()),c.html(e.val()),a.switchTaskToViewMode())});$("ul.workflow-task-list").on("click",".task-delete",function(){var a=$(this).parents("li.task"),b=a.find(".task-id-field").find("input").val();"undefined"!==typeof b?
confirm("Sind Sie sicher, dass die die Aufgabe entg\u00fcltig l\u00f6schen m\u00f6chten ?")&&$.post($appRoot+"/tasks/delete/"+b,function(b){alert("Killed Task");a.slideUp("800",function(){a.remove()})}):a.slideUp("800",function(){a.remove()})});$("ul.workflow-task-list").on("click",".task-config",function(){$(this).parents("li.task").switchTaskToEditMode()});$("ul.workflow-task-list").on("click",".task-down",function(){var a=$(this).parents("li.task"),b=a.next("li.task:not(.task-template, .workflow-task-add)");
b.length&&d(a,b,a.updateTaskStep())});$("ul.workflow-task-list").on("click",".task-up",function(){var a=$(this).parents("li.task"),b=a.prev("li.task:not(.task-template, .workflow-task-add)");b.length&&d(b,a)})});
