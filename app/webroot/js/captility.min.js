$mobileMaxWidth=992;function getParameterByName(c,e){c=c.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var f=RegExp("[\\?&]"+c+"=([^&#]*)").exec(e);return null==f?"":decodeURIComponent(f[1].replace(/\+/g," "))}jQuery.fn.slideRight=function(c,e){$(this).css({width:"0"});var f,a;return this.each(function(b,h){h=jQuery(h);f=h.clone().css({width:"auto"}).appendTo(h.parent());a=f.css("width");f.remove();h.animate({width:a},c,e)})};$(".panel-collapse  a").click(function(c){c.stopPropagation()});
function cssprop(c,e){return parseInt(c.css(e),10)}
$.isFunction($.fn.datepicker)&&function(c){c.fn.datepicker.dates.de={days:"Sonntag Montag Dienstag Mittwoch Donnerstag Freitag Samstag Sonntag".split(" "),daysMin:"So Mo Di Mi Do Fr Sa So".split(" "),daysShort:"So Mo Di Mi Do Fr Sa So".split(" "),months:"Januar Februar M\u00e4rz April Mai Juni Juli August September Oktober November Dezember".split(" "),monthsShort:"Jan Feb M\u00e4r Apr Mai Jun Jul Aug Sep Okt Nov Dez".split(" "),today:"Heute",weekStart:1,format:"D, dd.mm.yyyy"}}(jQuery);
$.isFunction($.fn.datepicker)&&$.isFunction($.fn.fullCalendar)&&$(document).ready(function(){$("#SideCalendar").datepicker({format:"dd/mm/yyyy",weekStart:1,todayBtn:!0,language:"de",orientation:"top center",daysOfWeekDisabled:"0,6",calendarWeeks:!0,todayHighlight:!0,selectWeek:!0,autoclose:!0,todayBtn:!0},function(){});$("body").on("focus",".pickDate",function(){$(this).datepicker({weekStart:1,language:"de",todayHighlight:!0,autoclose:!0,orientation:"top center",todayBtn:"linked"})});moment().format();
$(".pickDateTime").each(function(){$(this).val(moment($(this).val(),"DD.MM.YYYY hh:mm","de").format("dd, DD.MM.YYYY HH:mm [Uhr]","de"));moment($(this).val(),"dd, DD.MM.YYYY HH:mm [Uhr]",!0).isValid()||$(this).val(null)});$(".pickTime").each(function(){$(this).val(moment($(this).val(),"hh:mm","de").format("HH:mm [Uhr]","de"));moment($(this).val(),"HH:mm [Uhr]",!0).isValid()||$(this).val(null)});$("body").on("focus",".pickTime",function(){$(this).datetimepicker({language:"de",format:"HH:mm [Uhr]",minuteStepping:15,
useSeconds:!1,pickDate:!1})});$(".pickStart").on("change.dp",function(c){$(".pickEnd").data("DateTimePicker").setStartDate(c.date)});$(".pickEnd").on("change.dp",function(c){$(".pickStart").data("DateTimePicker").setEndDate(c.date)});$("#SideCalendar").datepicker().on("changeDate",function(c){$("#calendar").length?$("#calendar").fullCalendar("gotoDate",new Date(c.date)):window.location.href=$appRoot+"/calendars/?date="+c.date})});
$(document).ready(function(){if($.isFunction($.fn.datepicker)&&$.isFunction($.fn.fullCalendar)){if($.isFunction($.fn.qtip))var c=$("<div/>").qtip({id:"calendar",prerender:!0,content:{text:" ",title:{button:!0}},position:{my:"top center",at:" center",target:"mouse",viewport:$("#calendar"),adjust:{mouse:!1,scroll:!1}},show:!1,hide:{event:"unfocus",effect:function(){$(this).animate({opacity:0},{duration:300})}},style:"qtip-bootstrap"}).qtip("api");$mediaQueryHeader={left:"title",center:"",right:"prev,today,next"};
$mediaQueryView="agendaWeek";$hiddenDays=[0,6];if(-1<window.location.href.indexOf("calendar")||-1<window.location.href.indexOf("full_calendar"))$mediaQueryHeader.left="agendaDay,agendaWeek,month",$mediaQueryHeader.center="title",$mediaQueryHeader.right="prev,today,next",$mediaQueryView="month",$hiddenDays=[0];$(document).width()<$mobileMaxWidth&&($mediaQueryView="agendaDay");$(window).bind("resize",function(){$(document).width()<$mobileMaxWidth?$("#calendar").fullCalendar("changeView","agendaDay"):
$("#calendar").fullCalendar("changeView","agendaWeek")});var e={url:$appRoot+"events/feed",type:"GET",cache:!1},f={url:$appRoot+"events/feedMy",type:"GET",cache:!1};$('a[data-toggle="tab"]').on("shown.bs.tab",function(b){$("#calendar").fullCalendar("render");$("#calendar").fullCalendar("render")});$("#GeneralViewFc").click(function(){$(this).parent().hasClass("active")||$("#calendar").fullCalendar("removeEventSource",f).fullCalendar("removeEventSource",e).fullCalendar("addEventSource",e)});$("#MyWeekViewFc").click(function(){$(this).parent().hasClass("active")||
$("#calendar").fullCalendar("removeEventSource",e).fullCalendar("removeEventSource",f).fullCalendar("addEventSource",f)});$("#calendar").fullCalendar({header:$mediaQueryHeader,defaultView:$mediaQueryView,weekMode:"variable",allDaySlot:!1,weekends:!0,firstDay:1,hiddenDays:$hiddenDays,aspectRatio:1.215,firstHour:7,minTime:6,maxTime:22,axisFormat:"HH:mm",formatDate:"dd.MM.yyyy HH:mm:ss",titleFormat:{month:"MMMM yyyy",week:"dd.[ MMMM][ yyyy]{ '&#8211;' dd. MMMM yyyy}",day:"dddd, dd.MM.yyyy"},columnFormat:{month:"ddd",
week:"ddd - d.M.",day:"dddd d.M."},timeFormat:"HH:mm{ \u2013 HH:mm}' Uhr'",monthNames:"Januar Februar M\u00e4rz April Mai Juni Juli August September Oktober November Dezember".split(" "),monthNamesShort:"Jan Feb Mrz Apr Mai Jun Jul Aug Sept Okt Nov Dez".split(" "),dayNames:"Sonntag Montag Dienstag Mittwoch Donnerstag Freitag Samstag".split(" "),dayNamesShort:"So Mo Di Mi Do Fr Sa".split(" "),allDayText:"Ganzt\u00e4gig",buttonText:{today:"Heute",month:"Monat",week:"Woche",day:"Tag"},eventSources:[e],
editable:!1,selectable:!0,viewRender:function(b,a){$("#SideCalendar").datepicker("update",new Date(b.start))},eventClick:function(b,a,d){d='<ul class="list-group"><li><span class="glyphicon glyphicon-calendar"></span>'+b.datec+' <li><span class="glyphicon glyphicon-time gl-ml"></span>'+b.time;null!=b.location&&(d+=(b.location&&'  <span class="glyphicon glyphicon-map-marker gl-ml"></span>'+b.location+"</li><br/>"||"")+(b.niceEnd&&"<p><b>End:</b> "+b.end+"</p>"||""));null!=b.Lecture.lecture_id&&(d+=
'<li><span class="glyphicon glyphicon-th-list"></span><a href="lectures/view/'+b.Lecture.lecture_id+'">'+b.Lecture.number+" "+b.Lecture.name+"</a>"+(b.Lecture.link&&'<a href="'+b.Lecture.link+'"> <span class="glyphicon glyphicon-link gl-ms"></span></a>')+"</li><br/>");null!=b.Host.host_id&&(d+='<li><span class="glyphicon cp-icon-lecturer"></span><a href="hosts/view/'+b.Host.host_id+'">'+b.Host.name+"</a>"+(b.Host.email&&'<a href="mailto:'+b.Host.email+'"> <span class="glyphicon glyphicon-envelope gl-ms"></span></a>')+
(b.Host.contact_email&&'<a href="mailto:'+b.Host.contact_email+'"><span class="glyphicon glyphicon-envelope gl-ms"></span></a>')+"</li><br/>");null!=b.EventType.name&&(d+='<li><span class="glyphicon glyphicon-facetime-video"></span>'+b.EventType.name+"</li><br/>");null!=b.User.user_id&&(d+='<li><span class="glyphicon glyphicon-user"></span><a href="users/view/'+b.User.user_id+'">'+b.User.username+'</a><a href="mailto:'+b.User.email+'"> <span class="glyphicon glyphicon-envelope gl-ms"></span></a></li><br/>');
d+='<a class="btn-m btn-sm btn-default pull-right" name="Bearbeiten" href="'+$appRoot+"events/edit/"+b.id+'">Bearbeiten<a class="btn-m btn-sm btn-default pull-right" name="Anzeigen" href="'+$appRoot+"events/view/"+b.id+'">Anzeigen';c.set({"content.text":d,"content.title":'<span class="glyphicon glyphicon-film"></span>'+b.title,"style.classes":"qtip-bootstrap qtip-"+b.className}).reposition(a).show(a)},eventResizeStart:function(){c.hide()},eventDragStart:function(){c.hide()},viewDisplay:function(){c.hide()},
eventDrop:function(b){var a=new Date(b.start),d=a.getFullYear(),c=a.getDate(),e=a.getMonth()+1,f=a.getHours(),a=a.getMinutes(),g=new Date(b.end),k=g.getFullYear(),l=g.getDate(),m=g.getMonth()+1,n=g.getHours(),g=g.getMinutes();$.post($appRoot+"events/update?id="+b.id+"&start="+d+"-"+e+"-"+c+" "+f+":"+a+":00&end="+k+"-"+m+"-"+l+" "+n+":"+g+":00&allday="+(!0==b.allDay?1:0),function(b){})},eventResize:function(b){var a=new Date(b.start),d=a.getFullYear(),c=a.getDate(),e=a.getMonth()+1,f=a.getHours(),
a=a.getMinutes(),g=new Date(b.end),k=g.getFullYear(),l=g.getDate(),m=g.getMonth()+1,n=g.getHours(),g=g.getMinutes();$.post($appRoot+"events/update?id="+b.id+"&start="+d+"-"+e+"-"+c+" "+f+":"+a+":00&end="+k+"-"+m+"-"+l+" "+n+":"+g+":00",function(a){})}});if($("#calendar").length){var a=getParameterByName("date",window.location.href);a&&($("#calendar").fullCalendar("changeView","agendaDay"),$("#calendar").fullCalendar("gotoDate",new Date(a)))}}});
var eventColorValues={colors:["#202020 #3a87ad #f70 #009406 #FFEB00 #FD3E20 #5F43A8 #009B9B #579B00 #FF38D7 #FDFDFD".split(" ")]},eventColorNames="Black Blue Orange Green Yellow Red Purple Indigo Mint Pink White".split(" ");
$(document).ready(function(){function c(a,b,h){b.last().nextAll();h=cssprop(a.first().prev(),"margin-bottom");isNaN(h)&&(h=0);var d=cssprop(b.last().next(),"margin-top");isNaN(d)&&(d=0);var c=cssprop(a.first(),"margin-top"),e=cssprop(a.last(),"margin-bottom"),f=cssprop(b.first(),"margin-top"),g=cssprop(b.last(),"margin-bottom"),k=a.last().offset().top+a.last().outerHeight()-a.first().offset().top,l=b.last().offset().top+b.last().outerHeight()-b.first().offset().top;move1=l+Math.max(g,c)+Math.max(h,
f)-Math.max(h,c);move2=-k-Math.max(e,f)-Math.max(h,c)+Math.max(h,f);move3=move1+a.first().offset().top+k-b.first().offset().top-l+Math.max(e,d)-Math.max(g,d);a.css("position","relative");b.css("position","relative");a.animate({top:move1},{duration:800});b.animate({top:move2},{duration:800,complete:function(){a.insertAfter(b.last());a.removeAttr("style");b.removeAttr("style");a.updateTaskStep()}})}function e(){$.isFunction($.fn.sortable)&&$(".workflow-task-list").sortable({forcePlaceholderSize:!0,
items:":not(.sort-disabled)"}).bind("sortupdate",function(a,b){b.item.updateTaskStep()})}$(".colorpalette").colorPalette(eventColorValues).on("selectColor",function(a){$(".selected-color").val(a.color)});$.isFunction($.fn.selectpicker)&&($("select:not(.form-control-date)").addClass("show-tick").selectpicker({selectedTextFormat:"values",noneSelectedText:'<span class="glyphicon el-icon-error"></span>',noneResultsText:'<span class="glyphicon el-icon-remove-sign"></span>',dropupAuto:!1,liveSearch:!0}),
$("select.form-control-date").selectpicker({selectedTextFormat:"values",noneSelectedText:'<span class="glyphicon el-icon-error"></span>',noneResultsText:'<span class="glyphicon el-icon-remove-sign"></span>',dropupAuto:!1,width:"auto"}));$(document).keydown(function(a){if($(event.target).is("input, textarea, select"))return!0;if(37==a.keyCode||65==a.keyCode)return $(".fc-button-prev").click(),!0;if(39==a.keyCode||68==a.keyCode)return $(".fc-button-next").click(),!0;if(32==a.keyCode||83==a.keyCode||
87==a.keyCode)return $(".fc-button-today").click(),!0});(function(a){a.fn.updateScheduleRemoveState=function(){var b=a("#ScheduleContainer button.form-schedule-remove");1<b.length?b.prop("disabled",!1):b.prop("disabled",!0);return b.length}})(jQuery);if($.isFunction($.fn.selectpicker))$("#ScheduleContainer").on("shown.bs.tab","a.form-toggle",function(a){a=$($(this).attr("href"));a.parent().find("input, select").prop("disabled",!0).selectpicker("refresh");a.find("input, select").prop("disabled",!1).selectpicker("refresh")});
jQuery.fn.addSchedule=function(){var a=$(this).updateScheduleRemoveState();console.log("New ID: "+a);var b=["name","for","id","href"];$schedule=$(this).parents(".panel").clone();$schedule.find("label, textarea, input, a, .tab-pane, select").each(function(){for(var c=0;c<b.length;++c)if(void 0!==$(this).prop(b[c])){var d=$(this).prop(b[c]).replace(/(\d+)/g,a);"href"==b[c]&&(d=d.substr(d.indexOf("#")));$(this).prop(b[c],d)}});$("#ScheduleContainer").append($schedule);$schedule.slideDown();$schedule.find(".bootstrap-select").remove();
$schedule.find("input, select").selectpicker("refresh");$(this).updateScheduleRemoveState();return $(this)};if($.isFunction($.fn.datepicker))$("#ScheduleContainer").on("click","button.form-schedule-add",function(){$(this).addSchedule()});$("#ScheduleContainer").on("click","button.form-schedule-remove",function(){1<$("#ScheduleContainer button.form-schedule-remove").length&&$(this).parents(".panel").first().slideUp(800,function(){$(this).remove();$(this).updateScheduleRemoveState()})});$(function(){var a=
window.location.hash;a&&$('ul.nav a[href="'+a+'"]').first().tab("show");$(".nav-tabs a").click(function(a){a=$("body").scrollTop();window.location.hash=this.hash;$("html,body").scrollTop(a)})});$.fn.pulse=function(a){a=$.extend({times:3,duration:"slow"},a);for(var b=0;b<a.times;b++)$(this).animate({opacity:0.65},a.duration).animate({opacity:1},a.duration).delay(50);return $(this)};$(".alert, .message").css({opacity:0}).animate({opacity:1},600).delay(3500);$(this).queue(function(){$(".alert-success, .alert-info").animate({opacity:"0"},
"slow").slideUp(1E3);$(this).dequeue()});$("#ScheduleContainer").on("click","button.form-schedule-add",function(){var a=$("#ScheduleContainer .panel-body").last();a.hide();$("html, body").animate({scrollTop:a.parent().offset().top},800,function(){a.slideDown(800)})});$(window).scroll(function(){300>$(this).scrollTop()?$(".scrollTop").fadeOut(400):$(".scrollTop").fadeIn(800)});$(".scrollTop").on("click",function(){$("html, body").animate({scrollTop:0},400);return!1});$("img.landing-page-thumbnail").click(function(){$(".modal-body").empty();
var a=$(this).parent("a").attr("title");a?($(".modal-title").html(a),$("#LandingPageModal").find(".modal-dialog").css({"max-width":652})):($(".modal-title").html("Captility unterst\u00fctzt alle Ger\u00e4te!"),$("#LandingPageModal").find(".modal-dialog").css({"max-width":this.naturalWidth+52}));$($(this).parents("div").html()).appendTo(".modal-body");$("#LandingPageModal").modal({show:!0})});$.isFunction($.fn.unveil)&&$("img").unveil();$(".captility-breadcrumb li").each(function(a){$(this).css({"z-index":255-
a})});$(".captility-breadcrumb li").last().hide().css({"margin-left":"-400px"}).show().animate({"margin-left":"0"},600);$.isFunction($.fn.qrcode)&&$("a.qr-code").qtip({id:"qr-code",prerender:!0,content:{text:'<div class="qr-code-container"></div>',title:'<a href="'+window.location.href+'"><span class="glyphicon glyphicon-link"></span>'+window.location.href.substring(0,30)+"...</a>",button:"Close"},show:{event:"click"},style:"qtip-bootstrap",position:{my:"top right",at:" top right"},events:{show:function(a,
b){var c=window.location.href;$(this).find(".qr-code-container").empty().qrcode({width:250,height:250,text:c})}},hide:{event:"unfocus",effect:function(){$(this).animate({opacity:0},{duration:300})}}});jQuery.fn.switchTaskToEditMode=function(){$(this).find(".task-view").hide();$(this).find(".task-edit").show().find("input, textarea").each(function(){$(this).prop("disabled",!1)});return $(this)};jQuery.fn.switchTaskToViewMode=function(){$(this).find(".task-edit").slideUp().find("input, textarea").each(function(){});
$(this).find(".task-view").fadeIn();return $(this)};jQuery.fn.enableEnterListener=function(){var a=this;$(this).find(".task-name-field :input").keydown(function(b){if(13==(b.keyCode||b.which))return $(a).find(".task-save").click(),!1})};$(".task").enableEnterListener();jQuery.fn.countTasksFrom=function(a){return $(a).find("li:not(.task-template, .workflow-task-add)").length};jQuery.fn.updateTaskId=function(a){$(this).find("label, textarea, input").each(function(){for(var b=["name","for","id"],c=0;c<
b.length;++c)if(void 0!==$(this).prop(b[c])){var d=$(this).prop(b[c]).replace("$placeholder$",a);$(this).prop(b[c],d)}});return $(this)};jQuery.fn.updateTaskStep=function(){$(".workflow-task-list li.task").each(function(a,b){$(this).find(".task-step-field").find("input").val(a)});return $(this)};e();var f=["primary","warning","danger","info"];$(".workflow-task-list").on("click",".workflow-task-add",function(){var a=$(this).parent().find("li.task-template");if(0<a.length){var b=a.clone().removeClass("task-template").hide().addClass("task");
b.find(".timeline-badge").addClass(f[b.countTasksFrom(a.parent())%4]);b.switchTaskToEditMode();b.updateTaskId(b.countTasksFrom(a.parent()));a.before(b);b.slideDown("800");e();b.updateTaskStep();b.enableEnterListener()}});$("ul.workflow-task-list").on("click",".task-save",function(){var a=$(this).parents("li.task"),b=a.find("h4.task-name"),c=a.find(".task-description"),d=a.find(".task-name-field").find("input"),e=a.find(".task-description-field").find("textarea");""===d.val()?d.closest(".form-group").addClass("has-error"):
(b.find("hr").before(d.val()),c.html(e.val()),a.switchTaskToViewMode())});$("ul.workflow-task-list").on("click",".task-delete",function(){var a=$(this).parents("li.task"),b=a.find(".task-id-field").find("input").val();"undefined"!==typeof b?confirm("Sind Sie sicher, dass die die Aufgabe entg\u00fcltig l\u00f6schen m\u00f6chten ?")&&$.post($appRoot+"/tasks/delete/"+b,function(b){alert("Killed Task");a.slideUp("800",function(){a.remove()})}):a.slideUp("800",function(){a.remove()})});$("ul.workflow-task-list").on("click",
".task-config",function(){$(this).parents("li.task").switchTaskToEditMode()});$("ul.workflow-task-list").on("click",".task-down",function(){var a=$(this).parents("li.task"),b=a.next("li.task:not(.task-template, .workflow-task-add)");b.length&&c(a,b,a.updateTaskStep())});$("ul.workflow-task-list").on("click",".task-up",function(){var a=$(this).parents("li.task"),b=a.prev("li.task:not(.task-template, .workflow-task-add)");b.length&&c(b,a)});$("body").on("click","a.postLink",function(){var a=$(this),
b=$(this).data("href");$.post(b,function(){a.parents(".ticket").slideUp(600,function(){a.remove()})}).fail(function(){alert("Das Ticket konnte nicht aktualisiert werden.");window.location.replace(window.location.pathname)})})});
