$mobileMaxWidth=992;function getParameterByName(b,d){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a=RegExp("[\\?&]"+b+"=([^&#]*)").exec(d);return null==a?"":decodeURIComponent(a[1].replace(/\+/g," "))}jQuery.fn.slideRight=function(b,d){$(this).css({width:"0"});var a,e;return this.each(function(n,c){c=jQuery(c);a=c.clone().css({width:"auto"}).appendTo(c.parent());e=a.css("width");a.remove();c.animate({width:e},b,d)})};
$.isFunction($.fn.datepicker)&&function(b){b.fn.datepicker.dates.de={days:"Sonntag Montag Dienstag Mittwoch Donnerstag Freitag Samstag Sonntag".split(" "),daysMin:"So Mo Di Mi Do Fr Sa So".split(" "),daysShort:"So Mo Di Mi Do Fr Sa So".split(" "),months:"Januar Februar M\u00e4rz April Mai Juni Juli August September Oktober November Dezember".split(" "),monthsShort:"Jan Feb M\u00e4r Apr Mai Jun Jul Aug Sep Okt Nov Dez".split(" "),today:"Heute",weekStart:1,format:"D, dd.mm.yyyy"}}(jQuery);
$.isFunction($.fn.datepicker)&&$.isFunction($.fn.fullCalendar)&&$(document).ready(function(){$("#SideCalendar").datepicker({format:"dd/mm/yyyy",weekStart:1,todayBtn:!0,language:"de",orientation:"top center",daysOfWeekDisabled:"0,6",calendarWeeks:!0,todayHighlight:!0,selectWeek:!0,autoclose:!0,todayBtn:!0},function(){});$(".pickDate").datepicker({weekStart:1,language:"de",todayHighlight:!0,autoclose:!0,orientation:"top center",todayBtn:"linked"},function(){});$("#SideCalendar").datepicker().on("changeDate",
function(b){$("#calendar").length?$("#calendar").fullCalendar("gotoDate",new Date(b.date)):window.location.href=$appRoot+"/calendars/?date="+b.date})});
$(document).ready(function(){if($.isFunction($.fn.datepicker)&&$.isFunction($.fn.fullCalendar)){if($.isFunction($.fn.qtip))var b=$("<div/>").qtip({id:"calendar",prerender:!0,content:{text:" ",title:{button:!0}},position:{my:"top center",at:" center",target:"mouse",viewport:$("#calendar"),adjust:{mouse:!1,scroll:!1}},show:!1,hide:{event:"unfocus",effect:function(){$(this).animate({opacity:0},{duration:300})}},style:"qtip-bootstrap"}).qtip("api");$mediaQueryHeader={left:"title",center:"",right:"prev,today,next"};
$mediaQueryView="agendaWeek";$hiddenDays=[0,6];if(-1<window.location.href.indexOf("calendar")||-1<window.location.href.indexOf("full_calendar"))$mediaQueryHeader.left="agendaDay,agendaWeek,month",$mediaQueryHeader.center="title",$mediaQueryHeader.right="prev,today,next",$mediaQueryView="month",$hiddenDays=[0];$(document).width()<$mobileMaxWidth&&($mediaQueryView="agendaDay");$(window).bind("resize",function(){$(document).width()<$mobileMaxWidth?$("#calendar").fullCalendar("changeView","agendaDay"):
$("#calendar").fullCalendar("changeView","agendaWeek")});var d={url:$appRoot+"events/feed",type:"GET",cache:!1},a={url:$appRoot+"events/feedMy",type:"GET",cache:!1};$('a[data-toggle="tab"]').on("shown.bs.tab",function(a){$("#calendar").fullCalendar("render");$("#calendar").fullCalendar("render")});$("#GeneralViewFc").click(function(){$(this).parent().hasClass("active")||$("#calendar").fullCalendar("removeEventSource",a).fullCalendar("removeEventSource",d).fullCalendar("addEventSource",d)});$("#MyWeekViewFc").click(function(){$(this).parent().hasClass("active")||
$("#calendar").fullCalendar("removeEventSource",d).fullCalendar("removeEventSource",a).fullCalendar("addEventSource",a)});$("#calendar").fullCalendar({header:$mediaQueryHeader,defaultView:$mediaQueryView,weekMode:"variable",allDaySlot:!1,weekends:!0,firstDay:1,hiddenDays:$hiddenDays,aspectRatio:1.215,firstHour:7,minTime:6,maxTime:22,axisFormat:"HH:mm",formatDate:"dd.MM.yyyy HH:mm:ss",titleFormat:{month:"MMMM yyyy",week:"dd.[ MMM.][yy]{ '&#8211;' dd. MMMM yyyy}",day:"dddd, dd.MM.yyyy"},columnFormat:{month:"ddd",
week:"ddd - d.M.",day:"dddd d.M."},timeFormat:"HH:mm{ \u2013 HH:mm}' Uhr'",monthNames:"Januar Februar M\u00e4rz April Mai Juni Juli August September Oktober November Dezember".split(" "),monthNamesShort:"Jan Feb Mrz Apr Mai Jun Jul Aug Sept Okt Nov Dez".split(" "),dayNames:"Sonntag Montag Dienstag Mittwoch Donnerstag Freitag Samstag".split(" "),dayNamesShort:"So Mo Di Mi Do Fr Sa".split(" "),allDayText:"Ganzt\u00e4gig",buttonText:{today:"Heute",month:"Monat",week:"Woche",day:"Tag"},eventSources:[d],
editable:!1,selectable:!0,viewRender:function(a,c){$("#SideCalendar").datepicker("update",new Date(a.start))},eventClick:function(a,c,e){a.place="H12";e='<ul class="list-group"><li><span class="glyphicon glyphicon-calendar"></span>'+a.datec+' <li><span class="glyphicon glyphicon-time gl-ml"></span>'+a.time+" "+(a.place&&'  <span class="glyphicon glyphicon-map-marker gl-ml"></span>'+a.place+"</li><br/>"||"")+(a.niceEnd&&"<p><b>End:</b> "+a.end+"</p>"||"")+'<li><span class="glyphicon glyphicon-th-list"></span><a href="lectures/view/'+
a.Lecture.lecture_id+'">'+a.Lecture.number+" "+a.Lecture.name+"</a>"+(a.Lecture.link&&'<a href="'+a.Lecture.link+'"> <span class="glyphicon glyphicon-link gl-ms"></span></a>')+'</li><br/><li><span class="glyphicon cp-icon-lecturer"></span><a href="hosts/view/'+a.Host.host_id+'">'+a.Host.name+"</a>"+(a.Host.email&&'<a href="mailto:'+a.Host.email+'"> <span class="glyphicon glyphicon-envelope gl-ms"></span></a>')+(a.Host.contact_email&&'<a href="mailto:'+a.Host.contact_email+'"><span class="glyphicon glyphicon-envelope gl-ms"></span></a>')+
'</li><br/><li><span class="glyphicon glyphicon-facetime-video"></span>'+a.EventType.name+'</li><br/><li><span class="glyphicon glyphicon-user"></span><a href="users/view/'+a.User.user_id+'">'+a.User.username+'</a><a href="mailto:'+a.User.email+'"> <span class="glyphicon glyphicon-envelope gl-ms"></span></a></li><br/></ul><a class="btn-m btn-sm btn-default pull-right" name="Bearbeiten" href="captures/edit/'+a.capture_id+'">Bearbeiten<a class="btn-m btn-sm btn-default pull-right" name="Anzeigen" href="captures/view/'+
a.capture_id+'">Anzeigen';console.log(a);b.set({"content.text":e,"content.title":'<span class="glyphicon glyphicon-film"></span>'+a.title,"style.classes":"qtip-bootstrap qtip-"+a.className}).reposition(c).show(c)},eventResizeStart:function(){b.hide()},eventDragStart:function(){b.hide()},viewDisplay:function(){b.hide()},eventDrop:function(a){var c=new Date(a.start),e=c.getFullYear(),b=c.getDate(),d=c.getMonth()+1,g=c.getHours(),c=c.getMinutes(),f=new Date(a.end),h=f.getFullYear(),k=f.getDate(),l=f.getMonth()+
1,m=f.getHours(),f=f.getMinutes();$.post($appRoot+"events/update?id="+a.id+"&start="+e+"-"+d+"-"+b+" "+g+":"+c+":00&end="+h+"-"+l+"-"+k+" "+m+":"+f+":00&allday="+(!0==a.allDay?1:0),function(a){})},eventResize:function(a){var c=new Date(a.start),e=c.getFullYear(),b=c.getDate(),d=c.getMonth()+1,g=c.getHours(),c=c.getMinutes(),f=new Date(a.end),h=f.getFullYear(),k=f.getDate(),l=f.getMonth()+1,m=f.getHours(),f=f.getMinutes();$.post($appRoot+"events/update?id="+a.id+"&start="+e+"-"+d+"-"+b+" "+g+":"+c+
":00&end="+h+"-"+l+"-"+k+" "+m+":"+f+":00",function(a){})}});if($("#calendar").length){var e=getParameterByName("date",window.location.href);e&&($("#calendar").fullCalendar("changeView","agendaDay"),$("#calendar").fullCalendar("gotoDate",new Date(e)))}}});var eventColorValues={colors:["#202020 #3a87ad #f70 #009406 #FFEB00 #FD3E20 #5F43A8 #009B9B #579B00 #FF38D7 #FDFDFD".split(" ")]},eventColorNames="Black Blue Orange Green Yellow Red Purple Indigo Mint Pink White".split(" ");
$(document).ready(function(){$(".colorpalette").colorPalette(eventColorValues).on("selectColor",function(a){$(".selected-color").val(a.color)});$("select:not(.form-control-date)").addClass("show-tick").selectpicker({selectedTextFormat:"values",noneSelectedText:'<span class="glyphicon el-icon-error"></span>'});$("select.form-control-date").selectpicker({selectedTextFormat:"values",noneSelectedText:'<span class="glyphicon el-icon-error"></span>',width:"auto"});$(document).keydown(function(a){if($(event.target).is("input, textarea, select"))return!0;
if(37==a.keyCode||65==a.keyCode)return $(".fc-button-prev").click(),!0;if(39==a.keyCode||68==a.keyCode)return $(".fc-button-next").click(),!0;if(32==a.keyCode||83==a.keyCode||87==a.keyCode)return $(".fc-button-today").click(),!0});(function(a){a.fn.updateScheduleRemoveState=function(){var e=a("#ScheduleContainer button.form-schedule-remove");1<e.length?e.prop("disabled",!1):e.prop("disabled",!0);console.log(e.length);return!0}})(jQuery);$("#ScheduleContainer").on("shown.bs.tab","a.form-toggle",function(a){a=
$($(this).attr("href"));a.parent().find("input, select").prop("disabled",!0).selectpicker("refresh");a.find("input, select").prop("disabled",!1).selectpicker("refresh")});$(function(){var a=window.location.hash;a&&$('ul.nav a[href="'+a+'"]').first().tab("show");$(".nav-tabs a").click(function(a){a=$("body").scrollTop();window.location.hash=this.hash;$("html,body").scrollTop(a)})});if($.isFunction($.fn.datepicker))$("#ScheduleContainer").on("click","button.form-schedule-add",function(){var a=$("#ScheduleContainer .panel").length;
$("#ScheduleContainer").append('<div class="panel panel-default"> <div class="panel-heading panel-link" data-toggle="collapse" href="#container'+a+'"> <small class="glyphicon glyphicon-time"></small> <strong>Aufnahmezeit einstellen</strong></div> <div class="panel-body" id="container'+a+'"> <ul class="nav nav-tabs nav-justified tabs-left"> <li class="active"><a href="#single'+a+'" class="form-toggle" data-toggle="tab">Einzelaufzeichnung</a> </li> <li><a href="#regular'+a+'" class="form-toggle" data-toggle="tab">Regelm\u00e4\u00dfige Aufzeichnung</a></li> <li class="disabled"><a href="#except'+
a+'" class="form-toggle" data-toggle="tab">Ausnahmeregel</a> </li> </ul> \x3c!-- Single Instance Schedule --\x3e <div class="tab-content"> <div class="tab-pane active" id="single'+a+'">\x3c!--<div class="form-group"></div>--\x3e <div class="form-group"><label for="Schedule'+a+'IntervalStart" class="control-label">Datum der Aufzeichnung</label> <div class="input-group input-thin"><span  class="input-group-addon glyphicon glyphicon-calendar input-group-glyphicon"></span> <div class="input string required"><input name="data[Schedule]['+
a+'][interval_start]"    class="form-control pickDate"    placeholder="Datum der Aufzeichnung" type="string"    id="Schedule'+a+'IntervalStart"></div> </div> </div> <div class="form-group"> <div class="required"><label  for="Schedule'+a+'RepeatTimeHour">Veranstaltungsbeginn(Uhrzeit)</label> <div class="input time required"><select name="data[Schedule]['+a+'][repeat_time][hour]"    class="form-control form-control-date"    id="Schedule'+a+'RepeatTimeHour">  <option value="00">00</option>  <option value="01">1</option>  <option value="03">3</option>  <option value="04">4</option>  <option value="05">5</option>  <option value="06">6</option>  <option value="07">7</option>  <option value="08">8</option>  <option value="09">9</option>  <option value="10">10</option>  <option value="11">11</option>  <option value="12" selected="selected">12</option>  <option value="13">13</option>  <option value="14">14</option>  <option value="15">15</option>  <option value="16">16</option>  <option value="17">17</option>  <option value="18">18</option>  <option value="19">19</option>  <option value="20">20</option>  <option value="21">21</option>  <option value="22">22</option>  <option value="23">23</option> </select>:<select name="data[Schedule]['+
a+'][repeat_time][min]"  class="form-control form-control-date" id="Schedule'+a+'RepeatTimeMin">  <option value="00" selected="selected">00</option>  <option value="15">15</option>  <option value="30">30</option>  <option value="45">45</option> </select></div> </div> </div> <div class="form-group"> <div class="required"><label for="Schedule'+a+'DurationHour">Dauer der Aufzeichnung</label> <div class="input time required"><select name="data[Schedule]['+a+'][duration][hour]"    class="form-control form-control-date"    id="Schedule'+
a+'DurationHour"    required="required">  <option value="00">'+a+'</option>  <option value="01">1</option>  <option value="02" selected="selected">2</option>  <option value="03">3</option>  <option value="04">4</option>  <option value="05">5</option>  <option value="06">6</option>  <option value="07">7</option>  <option value="08">8</option>  <option value="09">9</option>  <option value="10">10</option>  <option value="11">11</option>  <option value="12">12</option>  <option value="13">13</option>  <option value="14">14</option>  <option value="15">15</option>  <option value="16">16</option>  <option value="17">17</option>  <option value="18">18</option>  <option value="19">19</option>  <option value="20">20</option>  <option value="21">21</option>  <option value="22">22</option>  <option value="23">23</option> </select>:<select name="data[Schedule]['+
a+'][duration][min]"  class="form-control form-control-date" id="Schedule'+a+'DurationMin"  required="required">  <option value="00" selected="selected">00</option>  <option value="15">15</option>  <option value="30">30</option>  <option value="45">45</option> </select></div> </div> </div> </div> \x3c!-- Regular Schedule --\x3e <div class="tab-pane" id="regular'+a+'"> \x3c!--<div class="form-group"></div><div class="form-group"></div>--\x3e <div class="form-group"><label for="Schedule'+a+'IntervalStart" class="control-label">Zeitraum der Aufzeichnung</label> <div class="input-group input-thin"><span  class="input-group-addon glyphicon glyphicon-calendar input-group-glyphicon"></span> <div class="input string required"><input name="data[Schedule]['+
a+'][interval_start]"    class="form-control pickDate"    placeholder="Beginn d. Zeitraums" disabled="disabled"    type="string" id="Schedule'+a+'IntervalStart"> </div> <span class="input-group-addon">bis</span> <div class="input string required"><input name="data[Schedule]['+a+'][interval_end]"    class="form-control pickDate"    placeholder="Ende d. Zeitraums" disabled="disabled"    type="string" id="Schedule'+a+'IntervalEnd"> </div> </div> </div> <div class="form-group"> <div><label for="Schedule'+
a+'RepeatWeek">W\u00f6chentlich wiederholen</label> <div class="input select"><select name="data[Schedule]['+a+'][repeat_week]"   class="form-control"   placeholder="1 = jede Woche wiederholen, 2= jede zweite usw."   disabled="disabled" id="Schedule'+a+'RepeatWeek">  <option value="1" selected="selected">Jede Woche</option>  <option value="2">Jede zweite Woche</option>  <option value="3">Jede dritte Woche</option>  <option value="4">Jede vierte Woche</option> </select></div> </div> </div> <div class="form-group"> <div><label for="Schedule'+
a+'RepeatDay">Wiederholen an Wochentag</label> <div class="input select"><select name="data[Schedule]['+a+'][repeat_day]"   class="form-control"   placeholder="&quot;Freitag&quot; f\u00fcr jeden Freitag usw..."   disabled="disabled" id="Schedule'+a+'RepeatDay">  <option value="Monday">Montag</option>  <option value="Tuesday">Dienstag</option>  <option value="Wednesday">Mittwoch</option>  <option value="Thursday">Donnerstag</option>  <option value="Friday">Freitag</option>  <option value="Saturday" selected="selected">Samstag</option>  <option value="Sunday">Sonntag</option> </select></div> </div> </div> <div class="form-group"> <div class="required"><label  for="Schedule'+
a+'RepeatTimeHour">Veranstaltungsbeginn(Uhrzeit)</label> <div class="input time required"><select name="data[Schedule]['+a+'][repeat_time][hour]"    class="form-control form-control-date"    disabled="disabled"    id="Schedule'+a+'RepeatTimeHour">  <option value="00">0</option>  <option value="01">1</option>  <option value="02">2</option>  <option value="03">3</option>  <option value="04">4</option>  <option value="05">5</option>  <option value="06">6</option>  <option value="07">7</option>  <option value="08">8</option>  <option value="09">9</option>  <option value="10">10</option>  <option value="11">11</option>  <option value="12" selected="selected">12</option>  <option value="13">13</option>  <option value="14">14</option>  <option value="15">15</option>  <option value="16">16</option>  <option value="17">17</option>  <option value="18">18</option>  <option value="19">19</option>  <option value="20">20</option>  <option value="21">21</option>  <option value="22">22</option>  <option value="23">23</option> </select>:<select name="data[Schedule]['+
a+'][repeat_time][min]"  class="form-control form-control-date" disabled="disabled"  id="Schedule'+a+'RepeatTimeMin">  <option value="00" selected="selected">00</option>  <option value="15">15</option>  <option value="3'+a+'">3'+a+'</option>  <option value="45">45</option> </select></div> </div> </div> <div class="form-group"> <div class="required"><label for="Schedule'+a+'DurationHour">Dauer (Stunden)</label> <div class="input time required"><select name="data[Schedule]['+a+'][duration][hour]"    class="form-control form-control-date"    disabled="disabled"    id="Schedule'+
a+'DurationHour">  <option value="00">0</option>  <option value="01">1</option>  <option value="02" selected="selected">2</option>  <option value="03">3</option>  <option value="04">4</option>  <option value="05">5</option>  <option value="06">6</option>  <option value="07">7</option>  <option value="08">8</option>  <option value="09">9</option>  <option value="10">10</option>  <option value="11">11</option>  <option value="12">12</option>  <option value="13">13</option>  <option value="14">14</option>  <option value="15">15</option>  <option value="16">16</option>  <option value="17">17</option>  <option value="18">18</option>  <option value="19">19</option>  <option value="20">20</option>  <option value="21">21</option>  <option value="22">22</option>  <option value="23">23</option> </select>:<select name="data[Schedule]['+
a+'][duration][min]"  class="form-control form-control-date" disabled="disabled"  id="Schedule'+a+'DurationMin">  <option value="00" selected="selected">00</option>  <option value="15">15</option>  <option value="30">30</option>  <option value="45">45</option> </select></div> </div> </div> </div> \x3c!-- Exception Schedule --\x3e <div class="tab-pane" id="except'+a+'"> <div class="alert alert-warning alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true">?</button> <strong>Achtung!</strong>Ausnahmeregeln werden in der aktuellen Version von Captility noch nicht unterst\u00fctzt. </div> </div> <hr/> <button class="btn btn-default form-schedule-add pull-right" type="button"><span class="glyphicon glyphicon-plus"></span>Weiterer Zeitplan </button> <button class="btn btn-default form-schedule-remove" type="button" onclick=""><span class="glyphicon glyphicon-trash"></span>Zeitplan entfernen </button> </div> </div> </div>');
$(this).updateScheduleRemoveState();$(".pickDate").datepicker({weekStart:1,language:"de",todayHighlight:!0,autoclose:!0,orientation:"top center",todayBtn:"linked"})});$("#ScheduleContainer").on("click","button.form-schedule-remove",function(){1<$("#ScheduleContainer button.form-schedule-remove").length&&$(this).parents(".panel").first().slideUp(800,function(){$(this).remove();$(this).updateScheduleRemoveState()})});$.fn.pulse=function(a){a=$.extend({times:3,duration:"slow"},a);for(var b=0;b<a.times;b++)$(this).animate({opacity:0.65},
a.duration).animate({opacity:1},a.duration).delay(50);return $(this)};$(".alert, .message").css({opacity:0}).animate({opacity:1},600).delay(3500);$(this).queue(function(){$(".alert-success, .alert-info").animate({opacity:"0"},"slow").slideUp(1E3);$(this).dequeue()});$("#ScheduleContainer").on("click","button.form-schedule-add",function(){var a=$("#ScheduleContainer .panel-body").last();a.hide();$("html, body").animate({scrollTop:a.parent().offset().top},800,function(){a.slideDown(800)})});var b=$(".container-wrapper").first(),
d=$(".btn-scrollTop").first();b.on("click","button.btn-scrollTop",function(){$("html, body").animate({scrollTop:$("body").offset().top},600)});d.length&&d.offset().top<$(window).height()&&d.hide();$("img.landing-page-thumbnail").click(function(){$(".modal-body").empty();var a=$(this).parent("a").attr("title");a?($(".modal-title").html(a),$("#LandingPageModal").find(".modal-dialog").css({"max-width":652})):($(".modal-title").html("Captility unterst\u00fctzt alle Ger\u00e4te!"),$("#LandingPageModal").find(".modal-dialog").css({"max-width":this.naturalWidth+
52}));$($(this).parents("div").html()).appendTo(".modal-body");$("#LandingPageModal").modal({show:!0})});$.isFunction($.fn.unveil)&&$("img").unveil();$(".captility-breadcrumb li").each(function(a){$(this).css({"z-index":255-a})});$(".captility-breadcrumb li").last().hide().css({"margin-left":"-400px"}).show().animate({"margin-left":"0"},600);$.isFunction($.fn.qrcode)&&$("a.qr-code").qtip({id:"qr-code",prerender:!0,content:{text:'<div class="qr-code-container"></div>',title:'<a href="'+window.location.href+
'"><span class="glyphicon glyphicon-link"></span>'+window.location.href.substring(0,30)+"...</a>",button:"Close"},show:{event:"click"},style:"qtip-bootstrap",position:{my:"top right",at:" top right"},events:{show:function(a,b){var d=window.location.href;$(this).find(".qr-code-container").empty().qrcode({width:250,height:250,text:d});console.log(d)}},hide:{event:"unfocus",effect:function(){$(this).animate({opacity:0},{duration:300})}}})});
